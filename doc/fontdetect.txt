*fontdetect.txt*	For Vim version 7.4	Last change: 2010-07-10

Plugin to detect installed fonts                        *fontdetect*

1. Introduction        |fontdetect-intro|
2. Installation        |fontdetect-installation|
3. Usage               |fontdetect-usage|
4. References          |fontdetect-references|
5. Credits             |fontdetect-credits|
6. License             |fontdetect-license|

==============================================================================
1. Introduction                                         *fontdetect-intro*

There are some rough edges in Vim related to the detection of fonts. Vim
supplies the |getfontname()| function that seems ideal for detecting whether a
font is available, but there are a couple of problems. First, |getfontname()|
cannot be called until the GUI has started (i.e., until the |GUIEnter| event
occurs), which means that it can't be used from .vimrc (or .gvimrc). This
makes it hard to define other settings that depend on the font (e.g., the
Powerline plugin's g:Powerline_symbols setting must be defined before
|GUIEnter| occurs).

In addition, the GTK+ 2 GUI seems unable to determine whether a given font
is installed, so |getfontname()| always simply returns the input argument,
and setting 'guifont' always succeeds even if the font is not present.

fontdetect works around these issues, providing methods for detecting which
fonts are installed on the system.

At present, the following platforms are supported:

- Linux (using fontdetect for GTK+ 2 GUI and xlsfonts for X11)
- Windows (by querying the registry)
- Mac OS X (by using python to query the system Cocoa API)

==============================================================================
2. Installation                                        *fontdetect-installation*

To install directly in your personal |vimfiles| directory (~/.vim under
unix or %HOMEPATH%\vimfiles under windows), unpack the downloaded archive
to yield these files: >

    doc/fontdetect.txt
    autoload/fontdetect.vim

Then, re-generate your help tags with Vim's `:helptags` command, e.g.: >
>
    :helptags ~/.vim/doc
<
You may also install fontdetect using a tool like pathogen[1] by unpacking
the downloaded archive into a bundle directory, e.g.: >

    ~/.vim/bundle/fontdetect

[1]: https://github.com/tpope/vim-pathogen

==============================================================================
3. Usage                                                *fontdetect-usage*

fontdetect provides the two functions for detecting fonts.
|fontdetect#hasFontFamily| checks whether a single font is available and
|fontdetect#firstFontFamily| locates the first available font in a list of
fonts.

A font family should be specified as a string with unescaped spaces, e.g.,
"DejaVu Sans Mono", "Consolas", etc. Do not replace spaces with underscores.

Note that font detection is case-insensitive.

If using X11 fonts, e.g., console vim, use only the font family. Do not use
an X logical font description (XLFD).

The additional function |fontdetect#reset| causes rescanning of font families.
It is useful if a font has been added to the system during an editing
session.

                                                     *fontdetect#hasFontFamily*
fontdetect#hasFontFamily(fontFamily) ~

Determines if the font family given by the string {fontFamily} exists.

For example (using GTK+ 2 GUI): >
    if fontdetect#hasFontFamily("DejaVu Sans Mono")
        let &guifont = "DejaVu Sans Mono 14"
    endif
<
                                                   *fontdetect#firstFontFamily*
fontdetect#firstFontFamily([{fontFamilies}]) ~

Returns the first installed font family from the list {fontFamilies}.
Returns the empty string if none of these font families are installed.

For example (using Windows GUI): >
    let &guifont = fontdetect#firstFontFamily([
        \ "DejaVu Sans Mono",
        \ "Consolas",
        \ ]) . ":h14"
<
                                                             *fontdetect#reset*
fontdetect#reset() ~

Resets the plugin so fonts are rescanned.

For example: >
    call fontdetect#reset()
<
==============================================================================
4. References                                           *fontdetect-references*

Method of listing installed fonts on OS X:
http://stackoverflow.com/questions/1113040/list-of-installed-fonts-os-x-c

==============================================================================
5. Credits                                              *fontdetect-credits*

Based on the vim-fontdetect plugin developed by Michael Henry, located at
https://github.com/drmikehenry/vim-fontdetect

===============================================================================
6. License                                              *fontdetect-license*

Distributed under the same |license| as Vim.

 vim:tw=78:ts=8:ft=help:norl:
